\hypertarget{inout_8c}{\section{/\-Users/kiskele/\-Dropbox/suli/mptcp/source/src/mptlib/inout.c File Reference}
\label{inout_8c}\index{/\-Users/kiskele/\-Dropbox/suli/mptcp/source/src/mptlib/inout.\-c@{/\-Users/kiskele/\-Dropbox/suli/mptcp/source/src/mptlib/inout.\-c}}
}


Screen and file input/output routines.  


{\ttfamily \#include $<$dirent.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include \char`\"{}multipath.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mp\-\_\-local.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}auth.\-h\char`\"{}}\\*
Include dependency graph for inout.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{inout_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{inout_8c_aec9920e2075cd9d6b9d3b9fbf2746f93}{tunnel\-\_\-print} (\hyperlink{multipath_8h_ad7a0156e1890c65de09911a138792f6e}{tunnel\-\_\-type} $\ast$\hyperlink{mp__local_8h_a5177b995bc2060be2efb1d21496d1971}{tun})
\item 
void \hyperlink{inout_8c_a1be03958e99ca65e5285a451336b7213}{conn\-\_\-print\-\_\-item} (F\-I\-L\-E $\ast$stream, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn)
\item 
void \hyperlink{inout_8c_a6a8276ba9c363037221249d3eb8479c0}{conn\-\_\-print} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn)
\item 
void \hyperlink{inout_8c_abc49d6855514222bc7dd04f77e1abcac}{conn\-\_\-save} (char $\ast$filename, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$\hyperlink{connection_8c_a5d49f71f053f35e161e9f2f86a026774}{conn\-\_\-start})
\item 
void \hyperlink{inout_8c_a74d1430a215c78d2d2516e80ef732303}{conn\-\_\-load\-\_\-dir} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$\hyperlink{connection_8c_a5d49f71f053f35e161e9f2f86a026774}{conn\-\_\-start})
\item 
void \hyperlink{inout_8c_a0bcd14cdbf4cfbc86272401f601c83f8}{conn\-\_\-parser} (F\-I\-L\-E $\ast$fd, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn)
\item 
\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$ \hyperlink{inout_8c_ad16eb426ae11cfdd188d4d480b23f563}{conn\-\_\-new} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn)
\item 
void \hyperlink{inout_8c_a1a9632e67041bb1907a065022fcd2ec3}{conn\-\_\-load} (char $\ast$filename, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$\hyperlink{connection_8c_a5d49f71f053f35e161e9f2f86a026774}{conn\-\_\-start})
\item 
int \hyperlink{inout_8c_acfb42844cff2af7ba8fb07d62cfe5793}{conn\-\_\-diff} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$old, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$new)
\item 
int \hyperlink{inout_8c_af53d1429392b1c1dbc9250bf0a6839df}{conn\-\_\-activate} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn, int replicate)
\item 
int \hyperlink{inout_8c_a9e0c0df574f096c77d9c8dd3ed816db0}{conn\-\_\-reload} (char $\ast$filename)
\item 
int \hyperlink{inout_8c_af311542df5f335666f4b81cf2e78d8a9}{conn\-\_\-reload\-\_\-dir} ()
\item 
void \hyperlink{inout_8c_a1b2a26c6ac333259fc57aa47c3e7c299}{conn\-\_\-mirror} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$dst, \hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$src)
\item 
void \hyperlink{inout_8c_a6f875afcff66d59c2f2cf2c4587164d8}{calculate\-\_\-weights} (\hyperlink{multipath_8h_a8fd58c5c9a4f2463735bc00b930e3b05}{connection\-\_\-type} $\ast$conn)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Screen and file input/output routines. \begin{DoxyCopyright}{Copyright}
Project maintained by Almasi, Bela; Debrecen, Hungary 
\end{DoxyCopyright}
\begin{DoxyAuthor}{Author}
Almasi, Bela; Debrecen, Hungary 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2012.\-08.\-15.
\end{DoxyDate}
Function calls to manage connections\-: \begin{center}

\begin{DoxyImageNoCaption}
  \mbox{\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{dot_inline_dotgraph_1}}
\end{DoxyImageNoCaption}
\end{center}
 

Definition in file \hyperlink{inout_8c_source}{inout.\-c}.



\subsection{Function Documentation}
\hypertarget{inout_8c_a6f875afcff66d59c2f2cf2c4587164d8}{\index{inout.\-c@{inout.\-c}!calculate\-\_\-weights@{calculate\-\_\-weights}}
\index{calculate\-\_\-weights@{calculate\-\_\-weights}!inout.c@{inout.\-c}}
\subsubsection[{calculate\-\_\-weights}]{\setlength{\rightskip}{0pt plus 5cm}void calculate\-\_\-weights (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{conn}
\end{DoxyParamCaption}
)}}\label{inout_8c_a6f875afcff66d59c2f2cf2c4587164d8}
Calculate packet\-\_\-max values from weight\-\_\-in and weight\-\_\-out parameters. 
\begin{DoxyParams}{Parameters}
{\em conn} & x \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000008}{Todo}]Not implemented \end{DoxyRefDesc}


Definition at line 966 of file inout.\-c.

\hypertarget{inout_8c_af53d1429392b1c1dbc9250bf0a6839df}{\index{inout.\-c@{inout.\-c}!conn\-\_\-activate@{conn\-\_\-activate}}
\index{conn\-\_\-activate@{conn\-\_\-activate}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-activate}]{\setlength{\rightskip}{0pt plus 5cm}int conn\-\_\-activate (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{conn, }
\item[{int}]{replicate}
\end{DoxyParamCaption}
)}}\label{inout_8c_af53d1429392b1c1dbc9250bf0a6839df}
Setup new or modify existing connection


\begin{DoxyParams}{Parameters}
{\em conn} & The connection needed to add \\
\hline
{\em replicate} & If set to 1, than send this connection to the remote peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if the connection is new or the same as \hyperlink{mp__local_8h_acfb42844cff2af7ba8fb07d62cfe5793}{conn\-\_\-diff()} if the connection is changed 
\end{DoxyReturn}


Definition at line 753 of file inout.\-c.

\hypertarget{inout_8c_acfb42844cff2af7ba8fb07d62cfe5793}{\index{inout.\-c@{inout.\-c}!conn\-\_\-diff@{conn\-\_\-diff}}
\index{conn\-\_\-diff@{conn\-\_\-diff}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-diff}]{\setlength{\rightskip}{0pt plus 5cm}int conn\-\_\-diff (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{old, }
\item[{{\bf connection\-\_\-type} $\ast$}]{new}
\end{DoxyParamCaption}
)}}\label{inout_8c_acfb42844cff2af7ba8fb07d62cfe5793}
Copy changes from a new temporary connection to the existing 
\begin{DoxyParams}{Parameters}
{\em old} & The existing connection, destination \\
\hline
{\em new} & The new connection, the source \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns with 0, if nothing changed. 
\end{DoxyReturn}


Definition at line 543 of file inout.\-c.

\hypertarget{inout_8c_a1a9632e67041bb1907a065022fcd2ec3}{\index{inout.\-c@{inout.\-c}!conn\-\_\-load@{conn\-\_\-load}}
\index{conn\-\_\-load@{conn\-\_\-load}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-load (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{{\bf connection\-\_\-type} $\ast$}]{conn\-\_\-start}
\end{DoxyParamCaption}
)}}\label{inout_8c_a1a9632e67041bb1907a065022fcd2ec3}
Load all connections from a specified file 
\begin{DoxyParams}{Parameters}
{\em filename} & The file to read \\
\hline
{\em conn\-\_\-start} & Can be the last item of the connections list to speed up iteration, but can be the head. If it is N\-U\-L\-L, than \hyperlink{mp__local_8h_ae207e2e02fdde659cbc918346dfc122d}{mp\-\_\-global\-\_\-conn} will be used. \\
\hline
\end{DoxyParams}


Definition at line 494 of file inout.\-c.

\hypertarget{inout_8c_a74d1430a215c78d2d2516e80ef732303}{\index{inout.\-c@{inout.\-c}!conn\-\_\-load\-\_\-dir@{conn\-\_\-load\-\_\-dir}}
\index{conn\-\_\-load\-\_\-dir@{conn\-\_\-load\-\_\-dir}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-load\-\_\-dir}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-load\-\_\-dir (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{conn\-\_\-start}
\end{DoxyParamCaption}
)}}\label{inout_8c_a74d1430a215c78d2d2516e80ef732303}
Load all connections from the configuration directory 
\begin{DoxyParams}{Parameters}
{\em conn\-\_\-start} & Can be the last item of the connections list to speed up iteration, but can be the head. If it is N\-U\-L\-L, than \hyperlink{mp__local_8h_ae207e2e02fdde659cbc918346dfc122d}{mp\-\_\-global\-\_\-conn} will be used. \\
\hline
\end{DoxyParams}


Definition at line 270 of file inout.\-c.

\hypertarget{inout_8c_a1b2a26c6ac333259fc57aa47c3e7c299}{\index{inout.\-c@{inout.\-c}!conn\-\_\-mirror@{conn\-\_\-mirror}}
\index{conn\-\_\-mirror@{conn\-\_\-mirror}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-mirror}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-mirror (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{dst, }
\item[{{\bf connection\-\_\-type} $\ast$}]{src}
\end{DoxyParamCaption}
)}}\label{inout_8c_a1b2a26c6ac333259fc57aa47c3e7c299}
Create a suitable connection for the local side from the remote configuration


\begin{DoxyParams}{Parameters}
{\em dst} & The destination of the new configuration \\
\hline
{\em src} & The configuration received from the remote host \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000007}{Todo}]search new unused port and send it back to the client \end{DoxyRefDesc}


Definition at line 898 of file inout.\-c.

\hypertarget{inout_8c_ad16eb426ae11cfdd188d4d480b23f563}{\index{inout.\-c@{inout.\-c}!conn\-\_\-new@{conn\-\_\-new}}
\index{conn\-\_\-new@{conn\-\_\-new}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf connection\-\_\-type}$\ast$ conn\-\_\-new (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{conn}
\end{DoxyParamCaption}
)}}\label{inout_8c_ad16eb426ae11cfdd188d4d480b23f563}
Create a new empty connection and append it to the end of the list 
\begin{DoxyParams}{Parameters}
{\em conn} & Can be the last item of the connections list to speed up iteration, but can be the head. If it is N\-U\-L\-L, than \hyperlink{mp__local_8h_ae207e2e02fdde659cbc918346dfc122d}{mp\-\_\-global\-\_\-conn} will be used. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the new connection 
\end{DoxyReturn}


Definition at line 469 of file inout.\-c.

\hypertarget{inout_8c_a0bcd14cdbf4cfbc86272401f601c83f8}{\index{inout.\-c@{inout.\-c}!conn\-\_\-parser@{conn\-\_\-parser}}
\index{conn\-\_\-parser@{conn\-\_\-parser}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-parser}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-parser (
\begin{DoxyParamCaption}
\item[{F\-I\-L\-E $\ast$}]{fd, }
\item[{{\bf connection\-\_\-type} $\ast$}]{conn}
\end{DoxyParamCaption}
)}}\label{inout_8c_a0bcd14cdbf4cfbc86272401f601c83f8}
Read a connection from the configuration file opened and save values in the \hyperlink{structconnection__struct}{connection\-\_\-struct} 
\begin{DoxyParams}{Parameters}
{\em fd} & The file descriptor \\
\hline
{\em conn} & The destination \\
\hline
\end{DoxyParams}


Definition at line 310 of file inout.\-c.

\hypertarget{inout_8c_a6a8276ba9c363037221249d3eb8479c0}{\index{inout.\-c@{inout.\-c}!conn\-\_\-print@{conn\-\_\-print}}
\index{conn\-\_\-print@{conn\-\_\-print}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-print}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-print (
\begin{DoxyParamCaption}
\item[{{\bf connection\-\_\-type} $\ast$}]{conn}
\end{DoxyParamCaption}
)}}\label{inout_8c_a6a8276ba9c363037221249d3eb8479c0}
Print out all connection's information 
\begin{DoxyParams}{Parameters}
{\em conn} & The head of the connections list \\
\hline
\end{DoxyParams}


Definition at line 140 of file inout.\-c.

\hypertarget{inout_8c_a1be03958e99ca65e5285a451336b7213}{\index{inout.\-c@{inout.\-c}!conn\-\_\-print\-\_\-item@{conn\-\_\-print\-\_\-item}}
\index{conn\-\_\-print\-\_\-item@{conn\-\_\-print\-\_\-item}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-print\-\_\-item}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-print\-\_\-item (
\begin{DoxyParamCaption}
\item[{F\-I\-L\-E $\ast$}]{stream, }
\item[{{\bf connection\-\_\-type} $\ast$}]{conn}
\end{DoxyParamCaption}
)}}\label{inout_8c_a1be03958e99ca65e5285a451336b7213}
Print out debug information about a connection 
\begin{DoxyParams}{Parameters}
{\em conn} & The connection \\
\hline
\end{DoxyParams}


Definition at line 61 of file inout.\-c.

\hypertarget{inout_8c_a9e0c0df574f096c77d9c8dd3ed816db0}{\index{inout.\-c@{inout.\-c}!conn\-\_\-reload@{conn\-\_\-reload}}
\index{conn\-\_\-reload@{conn\-\_\-reload}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-reload}]{\setlength{\rightskip}{0pt plus 5cm}int conn\-\_\-reload (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{inout_8c_a9e0c0df574f096c77d9c8dd3ed816db0}
Reload all connections' config from a specified file


\begin{DoxyParams}{Parameters}
{\em filename} & The filename which contains the connections \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The same as \hyperlink{mp__local_8h_acfb42844cff2af7ba8fb07d62cfe5793}{conn\-\_\-diff()} 
\end{DoxyReturn}


Definition at line 825 of file inout.\-c.

\hypertarget{inout_8c_af311542df5f335666f4b81cf2e78d8a9}{\index{inout.\-c@{inout.\-c}!conn\-\_\-reload\-\_\-dir@{conn\-\_\-reload\-\_\-dir}}
\index{conn\-\_\-reload\-\_\-dir@{conn\-\_\-reload\-\_\-dir}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-reload\-\_\-dir}]{\setlength{\rightskip}{0pt plus 5cm}int conn\-\_\-reload\-\_\-dir (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{inout_8c_af311542df5f335666f4b81cf2e78d8a9}
Reload all connections from the configuration directory \begin{DoxyReturn}{Returns}
The same as \hyperlink{mp__local_8h_acfb42844cff2af7ba8fb07d62cfe5793}{conn\-\_\-diff()} 
\end{DoxyReturn}


Definition at line 861 of file inout.\-c.

\hypertarget{inout_8c_abc49d6855514222bc7dd04f77e1abcac}{\index{inout.\-c@{inout.\-c}!conn\-\_\-save@{conn\-\_\-save}}
\index{conn\-\_\-save@{conn\-\_\-save}!inout.c@{inout.\-c}}
\subsubsection[{conn\-\_\-save}]{\setlength{\rightskip}{0pt plus 5cm}void conn\-\_\-save (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{{\bf connection\-\_\-type} $\ast$}]{conn\-\_\-start}
\end{DoxyParamCaption}
)}}\label{inout_8c_abc49d6855514222bc7dd04f77e1abcac}
Write out the changes of all connection in the specified file


\begin{DoxyParams}{Parameters}
{\em filename} & The file contains the connections \\
\hline
{\em conn\-\_\-start} & The head of the connections list \\
\hline
\end{DoxyParams}


Definition at line 156 of file inout.\-c.

\hypertarget{inout_8c_aec9920e2075cd9d6b9d3b9fbf2746f93}{\index{inout.\-c@{inout.\-c}!tunnel\-\_\-print@{tunnel\-\_\-print}}
\index{tunnel\-\_\-print@{tunnel\-\_\-print}!inout.c@{inout.\-c}}
\subsubsection[{tunnel\-\_\-print}]{\setlength{\rightskip}{0pt plus 5cm}void tunnel\-\_\-print (
\begin{DoxyParamCaption}
\item[{{\bf tunnel\-\_\-type} $\ast$}]{tun}
\end{DoxyParamCaption}
)}}\label{inout_8c_aec9920e2075cd9d6b9d3b9fbf2746f93}
Print out debug informations about the tunnel information 
\begin{DoxyParams}{Parameters}
{\em tun} & The tunnel interface \\
\hline
\end{DoxyParams}


Definition at line 36 of file inout.\-c.

